{"version":3,"sources":["webpack:///./src/views/Chat.vue?1f06","webpack:///./src/views/Chat.vue","webpack:///./src/views/Chat.vue?203e"],"names":["style","class","xmlns","viewBox","d","fill-rule","aria-hidden","focusable","data-prefix","data-icon","role","fill","to","messages","message","index","key","getposition","sender","sendtime","id","rows","placeholder","message_sent","sendMessage","setup","store","state","websocket","roomId","getters","username","send","JSON","stringify","chatSocket","WebSocket","window","location","host","onmessage","e","push","parse","data","onclose","console","error","document","querySelector","focus","__exports__","render"],"mappings":"kHAAA,W,uFCCOA,MAAA,+BAAmCC,MAAM,4B,GAE1CA,MAAM,qFACND,MAAA,0C,EAIE,eASM,OARJE,MAAM,6BACNC,QAAQ,YACRF,MAAM,sC,CAEN,eAGE,QAFAA,MAAM,8BACNG,EAAE,oH,KAIR,eAEM,OAFDH,MAAM,uDAAsD,SAEjE,G,EAEA,eAUM,OATJC,MAAM,6BACNC,QAAQ,YACRF,MAAM,wC,CAEN,eAIE,QAHAA,MAAM,8BACNI,YAAU,UACVD,EAAE,2G,MAKHH,MAAM,iB,GAMCA,MAAM,0C,GAIVA,MAAM,iB,GAKHA,MAAM,+C,GAQdA,MAAM,4C,EAWP,eAcM,OAbJA,MAAM,2EACNK,cAAY,OACZC,UAAU,QACVC,cAAY,MACZC,YAAU,cACVC,KAAK,MACLR,MAAM,6BACNC,QAAQ,e,CAER,eAGE,QAFAQ,KAAK,eACLP,EAAE,4N,MAZN,G,gHArEJ,eAwDM,MAxDN,EAwDM,CAvDJ,eAgCM,MAhCN,EAgCM,CA3BJ,eAWc,GAXDQ,GAAG,KAAG,C,wBACjB,iBASM,CATN,M,MAWF,EAIA,IAaF,eAoBM,MApBN,EAoBM,E,mBAnBJ,eAkBM,2BAlB2C,EAAAC,UAAQ,SAA3BC,EAASC,G,wBAAvC,eAkBM,OAlBDd,MAAM,WAAiDe,IAAKD,G,CAC/D,eAgBM,OAfHd,MAAK,gBAAE,EAAAgB,YAAYH,GACd,6C,CAEN,eAEO,OAFP,EAEO,eADFA,EAAQI,QAAM,GAEnB,eAKO,OALP,EAKO,eADFJ,EAAQA,SAAO,GAEpB,eAEM,MAFN,EAEM,eADDA,EAAQK,UAAQ,I,kBAO7B,eA2BM,MA3BN,EA2BM,C,eA1BJ,eAQY,YAPVC,GAAG,qBACHnB,MAAM,2FACNoB,KAAK,IACLC,YAAY,a,qDACH,EAAAC,aAAY,IACpB,QAAK,8CAAQ,EAAAC,aAAA,EAAAA,YAAA,qBAAW,YACzBxB,MAAA,kB,mBAFS,EAAAuB,gBAIX,eAgBS,UAhBDtB,MAAM,MAAO,QAAK,8CAAU,EAAAuB,aAAA,EAAAA,YAAA,qBAAW,cAAExB,MAAA,kB,sCAuBtC,GACbyB,MADa,WAEX,IAAMC,EAAQ,iBACRC,EAAQ,eAAS,CACrBd,SAAU,GACVU,aAAc,GACdK,UAAW,KACXC,OAAQ,EACRX,OAAQ,gBAAS,kBAAMQ,EAAMI,QAAQC,cAEjCP,EAAc,WAClBG,EAAMC,UAAUI,KACdC,KAAKC,UAAU,CACbpB,QAASa,EAAMJ,gBAGnBI,EAAMJ,aAAe,IAEjBN,EAAc,SAACH,GACnB,OAAIa,EAAMT,SAAWJ,EAAQI,OAAe,yBACrC,4BAkBT,OAhBA,gBAAU,WACR,IAAMiB,EAAa,IAAIC,UACrB,QAAUC,OAAOC,SAASC,KAAO,YAAcZ,EAAME,OAAS,KAGhEM,EAAWK,UAAY,SAASC,GAC9Bd,EAAMd,SAAS6B,KAAKT,KAAKU,MAAMF,EAAEG,QAGnCT,EAAWU,QAAU,WACnBC,QAAQC,MAAM,oCAGhBC,SAASC,cAAc,uBAAuBC,QAC9CvB,EAAMC,UAAYO,KAEpB,iCACK,eAAOR,IADZ,IAEEH,cACAP,kB,iCC9HN,MAAMkC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-2f07cffc.9faccbaa.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Chat.vue?vue&type=style&index=0&id=80fd59b8&lang=css\"","<template>\n  <div style=\"overscroll-behavior: none;\" class=\"w-full h-5/6 bg-gray-200\">\n    <div\n      class=\"fixed w-full bg-green-400 h-16 pt-2 text-white flex justify-between shadow-md z-10\"\n      style=\"top:0px; overscroll-behavior: none;\"\n    >\n      <!-- back button -->\n      <router-link to=\"/\">\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n          class=\"w-12 h-12 my-1 text-green-100 ml-2\"\n        >\n          <path\n            class=\"text-green-100 fill-current\"\n            d=\"M9.41 11H17a1 1 0 0 1 0 2H9.41l2.3 2.3a1 1 0 1 1-1.42 1.4l-4-4a1 1 0 0 1 0-1.4l4-4a1 1 0 0 1 1.42 1.4L9.4 11z\"\n          />\n        </svg>\n      </router-link>\n      <div class=\"my-3 text-green-100 font-bold text-lg tracking-wide\">\n        聊天室\n      </div>\n      <!-- 3 dots -->\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 24 24\"\n        class=\"icon-dots-vertical w-8 h-8 mt-2 mr-2\"\n      >\n        <path\n          class=\"text-green-100 fill-current\"\n          fill-rule=\"evenodd\"\n          d=\"M12 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4z\"\n        />\n      </svg>\n    </div>\n\n    <div class=\"w-full h-full\">\n      <div class=\"clearfix\" v-for=\"(message, index) in messages\" :key=\"index\">\n        <div\n          :class=\"getposition(message)\"\n          class=\"w-3/4 mx-4 my-2 p-4 rounded-lg relative\"\n        >\n          <span class=\"text-sm border-r-4 border-red-500 pr-2\">\n            {{ message.sender }}\n          </span>\n          <span\n            class=\"messages pl-2\n            \"\n          >\n            {{ message.message }}\n          </span>\n          <div class=\"text-xs absolute -bottom-3 right-1 p-2 mb-1\">\n            {{ message.sendtime }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"w-full flex justify-between bg-green-100\">\n    <textarea\n      id=\"chat-message-input\"\n      class=\"flex-grow m-2 py-2 px-4 mr-1 rounded-full border border-gray-300 bg-gray-200 resize-none\"\n      rows=\"1\"\n      placeholder=\"Message...\"\n      v-model=\"message_sent\"\n      @keyup.enter=\"sendMessage\"\n      style=\"outline: none;\"\n    ></textarea>\n    <button class=\"m-2\" @click.prevent=\"sendMessage\" style=\"outline: none;\">\n      <svg\n        class=\"svg-inline--fa text-green-400 fa-paper-plane fa-w-16 w-12 h-12 py-2 mr-2\"\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        data-prefix=\"fas\"\n        data-icon=\"paper-plane\"\n        role=\"img\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 512 512\"\n      >\n        <path\n          fill=\"currentColor\"\n          d=\"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z\"\n        />\n      </svg>\n    </button>\n  </div>\n</template>\n\n<script>\nimport { onMounted, reactive, toRefs, computed } from \"vue\";\nimport { useStore } from \"vuex\";\nexport default {\n  setup() {\n    const store = useStore();\n    const state = reactive({\n      messages: [],\n      message_sent: \"\",\n      websocket: null,\n      roomId: 1,\n      sender: computed(() => store.getters.username),\n    });\n    const sendMessage = () => {\n      state.websocket.send(\n        JSON.stringify({\n          message: state.message_sent,\n        })\n      );\n      state.message_sent = \"\";\n    };\n    const getposition = (message) => {\n      if (state.sender !== message.sender) return \"float-left bg-gray-300\";\n      return \"float-right bg-green-300\";\n    };\n    onMounted(() => {\n      const chatSocket = new WebSocket(\n        \"ws://\" + window.location.host + \"/ws/chat/\" + state.roomId + \"/\"\n      );\n\n      chatSocket.onmessage = function(e) {\n        state.messages.push(JSON.parse(e.data));\n      };\n\n      chatSocket.onclose = function() {\n        console.error(\"Chat socket closed unexpectedly\");\n      };\n\n      document.querySelector(\"#chat-message-input\").focus();\n      state.websocket = chatSocket;\n    });\n    return {\n      ...toRefs(state),\n      sendMessage,\n      getposition,\n    };\n  },\n};\n</script>\n<style>\n.messages {\n  /*父元素设置为flex后，子元素会自动布局并适应宽度，\n  但里面的文本文字超出边界却无法换 */\n  overflow-wrap: break-word;\n}\n</style>\n","import { render } from \"./Chat.vue?vue&type=template&id=80fd59b8\"\nimport script from \"./Chat.vue?vue&type=script&lang=js\"\nexport * from \"./Chat.vue?vue&type=script&lang=js\"\n\nimport \"./Chat.vue?vue&type=style&index=0&id=80fd59b8&lang=css\"\n\nimport exportComponent from \"/home/herschel/pythonProjects/BlogApp/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}