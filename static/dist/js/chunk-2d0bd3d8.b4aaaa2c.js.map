{"version":3,"sources":["webpack:///./src/components/RecentPost.vue","webpack:///./src/components/RecentPost.vue?8737"],"names":["class","articles","article","key","id","category","title","to","src","getAvatar","alt","author","username","last_updated_time","setup","store","state","results","args","page","isLoggedIn","getters","getAllArticles","url","a","get","headers","Authorization","then","response","data","push","map","Date","toLocaleDateString","catch","error","console","log","user","avatar_url","avatar","content","__exports__","render"],"mappings":"4IACOA,MAAM,sC,EACT,eAA0D,MAAtDA,MAAM,wCAAuC,QAAI,G,GAM9CA,MAAM,oC,SAGPA,MAAM,0E,GAgBRA,MAAM,oF,GAEDA,MAAM,kD,aAMNA,MAAM,8C,GAILA,MAAM,oC,oFAtClB,eA2CM,MA3CN,EA2CM,CA1CJ,G,mBACA,eAwCM,2BAvCc,EAAAC,UAAQ,SAAnBC,G,wBADT,eAwCM,OAtCHC,IAAKD,EAAQE,GACdJ,MAAM,kE,CAEN,eAMM,MANN,EAMM,CAJIE,EAAQG,U,iBADhB,eAIC,IAJD,EAIC,eADKH,EAAQG,SAASC,OAAK,I,wBAG9B,eAUc,GATZN,MAAM,mBACLO,GAAE,C,4BAAqE,EAAQ,Q,yBAOhF,iBAAmB,C,8BAAhBL,EAAQI,OAAK,O,kBAElB,eAgBM,MAhBN,EAgBM,CAbJ,eASM,MATN,EASM,CARJ,eAIE,OAHCE,IAAK,EAAAC,UAAUP,GAChBQ,IAAI,SACJV,MAAM,qC,UAER,eAEM,IAFN,EAEM,eADJE,EAAQS,OAAOC,UAAQ,KAG3B,eAES,OAFT,EAES,eADPV,EAAQW,mBAAiB,U,sGAYpB,GACbC,MADa,WAEX,IAAMC,EAAQ,iBACRC,EAAQ,eAAS,CACrBf,SAAU,GACVgB,QAAS,GACTC,KAAM,qBACNC,KAAM,EACNC,WAAY,gBAAS,kBAAML,EAAMM,QAAQD,gBAErCE,EAAiB,WAA8B,IAA7BC,EAA6B,uDAAvB,mBAC5B,EAAAC,EACGC,IAAIF,EAAK,CACRG,QAAS,CACP,eAAgB,mBAChB,cAAe,IAAQD,IAAI,aAC3BE,cAAe,SAAWX,EAAMI,cAGnCQ,MAAK,SAACC,GAEL,OADAb,EAAMC,QAAUY,EAASC,KAClBD,EAASC,QAEjBF,MAAK,SAACX,GAAY,MACjBD,EAAMf,SAAW,IACjB,EAAAe,EAAMf,UAAS8B,KAAf,uBACKd,EAAQe,KAAI,SAACR,GAId,OAHAA,EAAEX,kBAAoB,IAAIoB,KACxBT,EAAEX,mBACFqB,mBAAmB,WACdV,UAIZW,OAAM,SAACC,GAAD,OAAWC,QAAQC,IAAIF,OAE5B3B,EAAY,SAACP,GACjB,OAA4B,OAAxBA,EAAQS,OAAO4B,KACVrC,EAAQS,OAAO4B,KAAKC,WACQ,OAA1BtC,EAAQS,OAAO8B,OACjBvC,EAAQS,OAAO8B,OAAOC,QAEtB,yCAMX,OAHA,gBAAU,WACRpB,OAEF,+BACEP,SACG,eAAOC,IAFZ,IAGEM,iBACAb,gB,qBCnGN,MAAMkC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-2d0bd3d8.b4aaaa2c.js","sourcesContent":["<template>\n  <div class=\"px-8 mt-10 flex flex-col space-y-3\">\n    <h1 class=\"mb-4 text-xl font-bold text-gray-700\">最近发布</h1>\n    <div\n      v-for=\"article in articles\"\n      :key=\"article.id\"\n      class=\"flex flex-col max-w-sm px-8 py-6 bg-white rounded-lg shadow-md\"\n    >\n      <div class=\"flex items-center justify-center\">\n        <a\n          v-if=\"article.category\"\n          class=\"px-2 py-1 text-sm text-green-100 bg-gray-600 rounded hover:bg-gray-500\"\n          >{{ article.category.title }}</a\n        >\n      </div>\n      <router-link\n        class=\"mt-4 text-center\"\n        :to=\"{\n          name: 'details',\n          params: {\n            slug: article.slug,\n          },\n        }\"\n      >\n        {{ article.title }}\n      </router-link>\n      <div\n        class=\"flex flex-col space-y-3 items-center  lg:flex-row lg:space-y-0 lg:justify-between\"\n      >\n        <div class=\"flex items-center align-center md:mt-2 lg:mt-0\">\n          <img\n            :src=\"getAvatar(article)\"\n            alt=\"avatar\"\n            class=\"object-cover w-8 h-8 rounded-full\"\n          />\n          <a class=\"mx-3 text-sm text-gray-700 hover:underline\">{{\n            article.author.username\n          }}</a>\n        </div>\n        <span class=\"text-sm font-light text-gray-600\">{{\n          article.last_updated_time\n        }}</span>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport Cookies from \"js-cookie\";\nimport axios from \"axios\";\nimport { onMounted, toRefs, reactive, computed } from \"vue\";\nimport { useStore } from \"vuex\";\n\nexport default {\n  setup() {\n    const store = useStore();\n    const state = reactive({\n      articles: [],\n      results: {},\n      args: \"yyy-mm-dd hh:mm:ss\",\n      page: 1,\n      isLoggedIn: computed(() => store.getters.isLoggedIn),\n    });\n    const getAllArticles = (url = \"/api/blog_recent\") => {\n      axios\n        .get(url, {\n          headers: {\n            \"Content-Type\": \"Application/json\",\n            \"X-CSRFTOKEN\": Cookies.get(\"csrftoken\"),\n            Authorization: \"Token \" + state.isLoggedIn,\n          },\n        })\n        .then((response) => {\n          state.results = response.data;\n          return response.data;\n        })\n        .then((results) => {\n          state.articles = [];\n          state.articles.push(\n            ...results.map((a) => {\n              a.last_updated_time = new Date(\n                a.last_updated_time\n              ).toLocaleDateString(\"zh-hans\");\n              return a;\n            })\n          );\n        })\n        .catch((error) => console.log(error));\n    };\n    const getAvatar = (article) => {\n      if (article.author.user !== null) {\n        return article.author.user.avatar_url;\n      } else if (article.author.avatar !== null) {\n        return article.author.avatar.content;\n      } else {\n        return \"https://img.paulzzh.com/touhou/random\";\n      }\n    };\n    onMounted(() => {\n      getAllArticles();\n    });\n    return {\n      store,\n      ...toRefs(state),\n      getAllArticles,\n      getAvatar,\n    };\n  },\n};\n</script>\n","import { render } from \"./RecentPost.vue?vue&type=template&id=8e40e2de\"\nimport script from \"./RecentPost.vue?vue&type=script&lang=js\"\nexport * from \"./RecentPost.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/herschel/pythonProjects/BlogApp/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}